<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Nelson Tan - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Coupon Stash</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/AY1920S2-CS2103T-F09-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Nelson Tan - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-coupon-stash"><a class="link" href="#project-coupon-stash">PROJECT: Coupon Stash</a></h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="../images/Ui.png" alt="Ui" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Coupon Stash is a desktop coupons manager that allows users to keep track of
their coupons. The user interacts with it using a CLI, and it has a beautiful
GUI created with JavaFX. It is written in Java, and has about 15kLoC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to undo and redo operations</strong> (Pull
request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/91">#91</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/135">#135</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/284">#284</a>)</p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to undo the most recent operation on the
coupon stash. Undoing can itself be undone via the redo operation.</p>
</li>
<li>
<p>Justification: This feature is essential in allowing users who&#8217;ve made
mistakes in their operations on the coupon stash to revert their changes.
Addtionally, users will also want to be able to revert to their reverted
changes, and this led to the creation of the undo and redo commands.</p>
</li>
<li>
<p>Highlights: This enhancement required the deep copy of all a coupon&#8217;s
fields so as to prevent unpredictable side effects down the line. Thus,
there was constant collaboration and communication with the group members
regarding how to best tie in this feature with the rest of the features.
Some new commands added by other group members also require updates to
be pushed to the undo and redo feature, thus this was a very dynamic
feature that needed frequent updates.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to share coupons as images</strong> (Pull
request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/176">#176</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/384">#384</a>)</p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to share their coupons as an image file.</p>
</li>
<li>
<p>Justification: In the 21st century where everyone seems to post every
thing on social media, the ability for users to share their coupons as a
format ripe for social media consumption is of upmost importance. This
feature allows users to share their coupons in a portable format for sharing
over various platforms.</p>
</li>
<li>
<p>Highlights: This enhancement required the rendering of a <code>CouponCard</code> in a
<code>Scene</code>, before we proceed to take a <code>snapshot</code> of the <code>CouponCard</code>. The main
challenge came when trying to save the <code>WritableImage</code> returned by <code>snapshot</code>
as a <code>.png</code> file. To perform that task, an external module
(<code>javax.imageio.ImageIO</code>) had to be requested to be used. Then, the image
needed a save dialog to be saved. Due to file operations having potential for
many errors, exceptions has to be caught and thrown and multiple error
messages were also created to best reflect an error.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to open an offline copy of the user
guide</strong> (Pull
request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/201">#201</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/284">#284</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/385">#385</a>)</p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to open an offline copy of the user guide in
their web browser with the <code>help</code> command.</p>
</li>
<li>
<p>Justification: While the help tab exists, the help tab only shows
information about the commands. Much more of the program&#8217;s functionality is
available in the user guide, and with the program being an offline
application, it is thus very useful for the user to be able to read the user
guide offline. This will empower users to fully exploit the potential of our
program.</p>
</li>
<li>
<p>Highlights: The user guide is stored as a single <code>.html</code> file with
all styles and images embed into that single ~6 MB file.
The file has to be packaged into the release jar file,
before it gets extracted from the jar file on the first time the <code>help</code>
command is executed. It was a challenge to reliably get the path of the jar
file. (We need the path to extract the <code>.html</code> from the jar) After figuring
out how to get the jar file path during runtime, we had to extract the
<code>.html</code> file from within the jar file and then write it to the directory the
jar file resides. Initially, writing to a file was very slow and it would
even make the program crash sometimes! Then, I remembered what I learnt from
CS2106 and realised that a buffered writing operation will reduce system
calls and thus be faster. And lo and behold, after the implementation of a
write buffer, writing speeds got a lot faster. (now it only takes one second)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added a history command that allows the user to navigate
to previous commands using up/down keys. (Pull
request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/135">#135</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/140">#140</a>)</p>
</li>
<li>
<p><strong>Minor enhancement</strong>: added a sort command that allows the user to sort
coupons by the names, expiry dates, and remind dates in ascending order. (Pull
request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/140">#140</a>,
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/284">#284</a>)</p>
</li>
<li>
<p><strong>Minor enhancement</strong>: worked on the expand command. (Pull request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/375">#375</a>)</p>
</li>
<li>
<p><strong>Minor enhancement</strong>: wrote the logic for the Help Pane. (Pull request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/215">#215</a>)</p>
</li>
<li>
<p><strong>Minor enhancement</strong>: improved and cleaned up the remind command. (Pull request
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/329">#329</a>)</p>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://nus-cs2103-ay1920s2.github.io/tp-dashboard/#=undefined&amp;search=nelsontky">All contributed code</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.3</code> - <code>v1.5rc</code> (3 releases) on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Updated the help menu <a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/215">#215</a></p>
</li>
<li>
<p>Updated the help command to open an offline copy of the user guide
<a href="https://github.com/AY1920S2-CS2103T-F09-1/main/pull/284">#284</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Contributed to forum discussions
(example:  <a href="https://github.com/nus-cs2103-AY1920S2/forum/issues/7">1</a>)</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples:
<a href="https://github.com">1</a>, <a href="https://github.com">2</a>, <a href="https://github.com">3</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my
ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="deleting-a-coupon-code-delete-code"><a class="link" href="#deleting-a-coupon-code-delete-code">Deleting a coupon: <code>delete</code></a></h3>
<div class="paragraph">
<p>Deletes the specified coupon from the Coupon Stash.</p>
</div>
<div class="paragraph">
<p>Format: <code>delete INDEX</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Deletes the coupon at the specified <a href="#index"><code>INDEX</code></a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>list</code><br>
<code>delete 2</code><br>
Deletes the second coupon in the coupon list.</p>
</li>
<li>
<p><code>find rice</code><br>
<code>delete 1</code><br>
Deletes the first coupon in the resulting coupon list of the find command.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase
my ability to write technical documentation and the technical depth of my
contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="undo-redo-feature"><a class="link" href="#undo-redo-feature">Undo/Redo feature</a></h3>
<div class="paragraph">
<p>The undo/redo mechanism is facilitated by with an undo/redo history, stored
internally as an <code>couponStashStateList</code> with a <code>commandTextHistory</code> and
<code>currStateIndex</code>. All these components are encapsulated in the <code>HistoryManager</code>
class.
The following methods in the <code>Model</code> interface facilitates this feature:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Model#commitCouponStash(String commandText)</code>&#8201;&#8212;&#8201;Saves the current coupon
stash state and the command text that triggered the change in state into
<code>HistoryManager</code>.</p>
</li>
<li>
<p><code>Model#undo()</code>&#8201;&#8212;&#8201;Restores the previous coupon stash state from
<code>HistoryManager</code>.</p>
</li>
<li>
<p><code>Model#redo()</code>&#8201;&#8212;&#8201;Restores a previously undone coupon stash state from
<code>HistoryManager</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>Given below is an example usage scenario and how the undo/redo mechanism
behaves at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. The user launches the application for the first time.
The <code>CouponStash</code> will be initialized with the initial coupon stash state, and
the <code>currStateIndex</code> pointing to that single coupon stash state.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoState0.png" alt="UndoRedoState0">
</div>
<div class="title">Figure 1. <code>CouponStash</code> will be initialized with the initial coupon stash state.</div>
</div>
<div class="paragraph">
<p>Step 2. The user executes <code>delete 5</code> command to delete the 5th coupon in the
coupon stash.
The <code>delete</code> command calls <code>Model#commitCouponStash(String commandText)</code>,
causing the modified state of the coupon stash after the <code>delete 5</code> command
executes to be saved in the <code>couponStashStateList</code>, and the <code>delete 5</code> command
text to be stored in the <code>commandTextHistory</code>.  <code>currStateIndex</code> is shifted to
the newly inserted coupon stash state.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoState1.png" alt="UndoRedoState1">
</div>
<div class="title">Figure 2. <code>currStateIndex</code> is shifted to the newly inserted coupon stash state.</div>
</div>
<div class="paragraph">
<p>Step 3. The user executes <code>add n/OMO STORE &#8230;&#8203;</code> to add a new coupon.
The <code>add</code> command also calls <code>Model#commitCouponStash(String commandText)</code>,
causing another modified coupon stash state and command text to be saved into
the <code>couponStashStateList</code> and <code>commandTextHistory</code> respectively.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoState2.png" alt="UndoRedoState2">
</div>
<div class="title">Figure 3. Modified coupon stash state and command text are saved into the <code>couponStashStateList</code> and <code>commandTextHistory</code> respectively.</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not call
<code>Model#commitCouponStash(String commandText)</code>, so the coupon stash state and
command text will not be saved.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 4. The user now decides that adding the coupon was a mistake, and decides
to undo that action by executing the <code>undo</code> command.
The <code>undo</code> command will call <code>Model#undoCouponStash()</code>, which will shift the
<code>currStateIndex</code> once to the left, pointing it to the previous coupon stash
state, and restores the coupon stash to that state. Plus, the command text is
returned, thus allowing for the display of the command that was undone. In this
case, the command undone is <code>add n/OMO STORE&#8230;&#8203;</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoState3.png" alt="UndoRedoState3">
</div>
<div class="title">Figure 4. <code>currStateIndex</code> shifted once to the left.</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currStateIndex</code> is at index 0, pointing to the initial coupon stash
state, then there are no previous coupon stash states to restore.
The <code>undo</code> command uses <code>Model#canUndoCouponStash()</code> to check if this is the
case.
If so, it will return an error to the user rather than attempting to perform
the undo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoSequenceDiagram.png" alt="UndoSequenceDiagram">
</div>
<div class="title">Figure 5. Undo operation sequence diagram.</div>
</div>
<div class="paragraph">
<p>The <code>redo</code> command does the opposite&#8201;&#8212;&#8201;it calls <code>Model#redoCouponStash()</code>,
which shifts the <code>currStateIndex</code> once to the right, pointing to the previously
undone state and command text, and restores the coupon stash to that state.
Finally, it returns the redone command text.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currStateIndex</code> is at index <code>couponStashStateList.size() - 1</code>, pointing
to the latest coupon stash state, then there are no undone coupon stash states
to restore.
The <code>redo</code> command uses <code>Model#canRedoCouponStash()</code> to check if this is the
case.
If so, it will return an error to the user rather than attempting to perform
the redo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 5. The user then decides to execute the command <code>list</code>.
Commands that do not modify the coupon stash, such as <code>list</code>, will  not call
<code>Model#commitCouponStash()</code>.
Thus, the <code>couponStashStateList</code> remains unchanged.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoState4.png" alt="UndoRedoState4">
</div>
<div class="title">Figure 6. <code>couponStashStateList</code> remains unchanged.</div>
</div>
<div class="paragraph">
<p>Step 6. The user executes <code>clear</code>, which calls <code>Model#commitCouponStash()</code>.
Since the <code>currStateIndex</code> is not pointing at the end of the
<code>couponStashStateList</code>, all coupon stash states and command text history after
the <code>currStateIndex</code> will be purged.
We designed it this way because it no longer makes sense to redo the <code>add n/OMO
                                                                      STORE &#8230;&#8203;</code> command.
This is the behavior that most modern desktop applications follow.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/UndoRedoState5.png" alt="UndoRedoState5">
</div>
<div class="title">Figure 7. Command text history after the <code>currStateIndex</code> is purged.</div>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user executes a
new command text:</p>
</div>
<div class="paragraph">
<p>.
image::CommitActivityDiagram.png[]</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-undo-redo-executes"><a class="link" href="#aspect-how-undo-redo-executes">Aspect: How undo &amp; redo executes</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Saves the entire coupon stash.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement.</p>
</li>
<li>
<p>Cons: May have performance issues in terms of memory usage. Plus, have to
perform deep copy of coupons when saving the coupon stash so as to prevent
unwanted mutations.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Individual command knows how to undo/redo by itself.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will use less memory (e.g. for <code>delete</code>, just save the coupon being
deleted).</p>
</li>
<li>
<p>Cons: We must ensure that the implementation of each individual command is
correct.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternative 1 was chosen due to its relative simplicity and extensibility.
Little to no modification needs to be made to each command that can be
undone, thus reducing chances of new bugs surfacing. Additionally, the ability
to undo operations such as <code>clear</code> will require alternative 2 to copy the
entire coupon stash too, so both alternatives will have the same memory
footprint in such a context. Finally, the real world performance impact of
copying all coupons vs copying one is not very huge. Thus, the more
extensible and simpler alternative 1 was chosen.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-powerpointlabs"><a class="link" href="#project-powerpointlabs">PROJECT: PowerPointLabs</a></h2>
<div class="sectionbody">
<hr>
<div class="paragraph">
<p><em>{Optionally, you may include other projects in your portfolio.}</em></p>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2020-04-13 14:27:24 UTC</div></div></div></body></html>